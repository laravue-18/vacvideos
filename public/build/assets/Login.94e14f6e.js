import{f as h,s as l,_,m as w,c as U,a as s,w as r,b as u,o as y,g as m}from"./app.be536010.js";const e=h.create({baseURL:"",withCredentials:!0});e.interceptors.response.use(t=>t,function(t){return t.response&&[401,419].includes(t.response.status)&&l.getters["auth/authUser"]&&!l.getters["auth/guest"]&&l.dispatch("auth/logout"),Promise.reject(t)});const V={async login(t){return await e.get("/sanctum/csrf-cookie"),e.post("/api/login",t)},logout(){return e.post("/api/logout")},async forgotPassword(t){return await e.get("/sanctum/csrf-cookie"),e.post("/forgot-password",t)},getAuthUser(){return e.get("/api/user")},async resetPassword(t){return await e.get("/sanctum/csrf-cookie"),e.post("/reset-password",t)},updatePassword(t){return e.put("/user/password",t)},async registerUser(t){return await e.get("/sanctum/csrf-cookie"),e.post("/register",t)},sendVerification(t){return e.post("/email/verification-notification",t)},updateUser(t){return e.put("/user/profile-information",t)}},k={name:"login",data(){return{form:{name:"",password:""}}},methods:{...w({signIn:"auth/login"}),async login(){try{if(await V.login(this.form),await this.$store.dispatch("auth/getAuthUser"))this.$store.dispatch("auth/setGuest",{value:"isNotGuest"}),this.$router.push("/");else{const o=Error("Unable to fetch user after login, check your API settings.");throw o.name="Fetch User",o}}catch(t){this.error=getError(t)}}}},x={class:"flex justify-center items-center h-full"},C=m(" Login "),I=m("Log In");function P(t,o,b,F,n,p){const c=u("Input"),i=u("FormItem"),d=u("Button"),f=u("Form"),g=u("Card");return y(),U("div",x,[s(g,{class:"w-96"},{title:r(()=>[C]),default:r(()=>[s(f,{modelValue:n.form,"onUpdate:modelValue":o[2]||(o[2]=a=>n.form=a)},{default:r(()=>[s(i,{label:"Name"},{default:r(()=>[s(c,{type:"text",modelValue:n.form.name,"onUpdate:modelValue":o[0]||(o[0]=a=>n.form.name=a)},null,8,["modelValue"])]),_:1}),s(i,{label:"Password"},{default:r(()=>[s(c,{type:"text",modelValue:n.form.password,"onUpdate:modelValue":o[1]||(o[1]=a=>n.form.password=a)},null,8,["modelValue"])]),_:1}),s(i,null,{default:r(()=>[s(d,{type:"primary",long:"",onClick:p.login},{default:r(()=>[I]),_:1},8,["onClick"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])}const A=_(k,[["render",P]]);export{A as default};
